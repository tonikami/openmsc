"use strict";!function(){function e(e){var t=keyboardRouter.defaultOptions,n=e.fn||t.fn,r={name:e.name,when:(e.when||t.when).toUpperCase(),preventDefault:void 0!==e.preventDefault?e.preventDefault:t.preventDefault,alt:!1,ctrl:!1,shift:!1,keys:[]};return r.fn=n.bind(e.thisArg||t.thisArg,e),e.keys.forEach(function(e){e=e.toUpperCase(),"ALT"===e?r.alt=!0:"CTRL"===e?r.ctrl=!0:"SHIFT"===e?r.shift=!0:r.keys.push(1===e.length?e.charCodeAt(0):keyboardRouter.keys[e])}),r}function t(){for(;f.length;){var e=f.pop();e.active&&(delete e.active,e.fn({type:"keyup"}))}}function n(e){var t=e.keyCode;o[t]||(o[t]=!0,a.some(function(n){if(!(n.active||e.altKey!==n.alt||e.ctrlKey!==n.ctrl||e.shiftKey!==n.shift||n.keys.length&&t!==n.keys[0])&&(n.fn(e),n.when.indexOf("UP")>-1&&(n.active=!0,f.push(n)),n.preventDefault!==!1))return e.preventDefault(),!0}))}function r(e){var t,n,r,a=e.keyCode,i=f.length;if(o[a]=!1,i){for(r=[],t=i-1;t>=0;--t)n=f[t],n.active&&(n.alt&&!e.altKey||n.ctrl&&!e.ctrlKey||n.shift&&!e.shiftKey||n.keys.length||a===n.keys[0])&&r.push(t);r.forEach(function(t){n=f[t],delete n.active,n.fn(e),f.splice(t,1)})}}var o=[],a=[],f=[];window.keyboardRouter=function(){for(var o=0,f=arguments.length;o<f;)a.push(e(arguments[o++]));document.body.addEventListener("keydown",n),document.body.addEventListener("keyup",r),window.addEventListener("blur",t)},keyboardRouter.defaultOptions={when:"down",fn:function(){},preventDefault:!0},keyboardRouter.keys={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPSLOCK:20,ESCAPE:27,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,OS:91,CONTEXTMENU:93,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLLLOCK:145}}();